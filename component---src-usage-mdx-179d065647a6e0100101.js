(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{HVoQ:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return a})),n.d(t,"default",(function(){return l}));var s=n("Fcif"),c=n("+I+c"),o=n("/FXl"),b=n("TjRS"),a=(n("aD51"),{});void 0!==a&&a&&a===Object(a)&&Object.isExtensible(a)&&!a.hasOwnProperty("__filemeta")&&Object.defineProperty(a,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"src/usage.mdx"}});var r={_frontmatter:a},i=b.a;function l(e){var t=e.components,n=Object(c.a)(e,["components"]);return Object(o.b)(i,Object(s.a)({},r,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h1",{id:"basic-usage"},"Basic Usage"),Object(o.b)("h2",{id:"import-package"},"Import package"),Object(o.b)("pre",null,Object(o.b)("code",Object(s.a)({parentName:"pre"},{className:"language-ts"}),"import DXClient from '@dxfeed/widgets-api'\n")),Object(o.b)("h2",{id:"configure--create-connection"},"Configure & Create connection"),Object(o.b)("p",null,"Create instance of DXClient and set web socket address and open connection."),Object(o.b)("pre",null,Object(o.b)("code",Object(s.a)({parentName:"pre"},{className:"language-ts"}),"import DXClient from '@dxfeed/widgets-api'\n\nconst client = new DXClient('wss://CLIENT_NAME.dxfeed.com/api/rsocket')\n")),Object(o.b)("h2",{id:"configure--create-subscription"},"Configure & Create subscription"),Object(o.b)("p",null,"You should specify the record and the requested symbols."),Object(o.b)("pre",null,Object(o.b)("code",Object(s.a)({parentName:"pre"},{className:"language-ts"}),"import { QuoteSubscription } from '@dxfeed/widgets-api/records/Quote'\n\nconst subscription = await client.subscribe(\n  new QuoteSubscription(\n    ['AAPL'] /* symbols */\n  )\n)\n")),Object(o.b)("p",null,"The full list of records can be found here:"),Object(o.b)("pre",null,Object(o.b)("code",Object(s.a)({parentName:"pre"},{className:"language-js"}),"import { /* Subscription */ } from '@dxfeed/widgets-api/records/*'\n")),Object(o.b)("p",null,"You can also request only specific fields, not the entire event."),Object(o.b)("pre",null,Object(o.b)("code",Object(s.a)({parentName:"pre"},{className:"language-ts"}),"client.subscribe(\n  new QuoteSubscription(\n    symbols,\n    ['eventSymbol', 'bidPrice'] /* fields */\n  )\n)\n")),Object(o.b)("p",null,"For timed subscription you should also provide time to start subscription from."),Object(o.b)("pre",null,Object(o.b)("code",Object(s.a)({parentName:"pre"},{className:"language-ts"}),"client.subscribe(\n  new TimeAndSaleSubscription(\n    symbols,\n    fields,\n    1500000000000 /* from time */\n  )\n)\n")),Object(o.b)("h2",{id:"change-symbols-in-subscription"},"Change symbols in subscription"),Object(o.b)("h3",{id:"add-symbols"},"Add symbols"),Object(o.b)("pre",null,Object(o.b)("code",Object(s.a)({parentName:"pre"},{className:"language-ts"}),"subscription.addSymbols(['MSFT'])\n")),Object(o.b)("h3",{id:"remove-symbols"},"Remove symbols"),Object(o.b)("pre",null,Object(o.b)("code",Object(s.a)({parentName:"pre"},{className:"language-ts"}),"subscription.removeSymbols(['AAPL'])\n")),Object(o.b)("h2",{id:"get-events-from-stream"},"Get events from stream"),Object(o.b)("p",null,"After an open subscription, you can listen to events from the stream."),Object(o.b)("pre",null,Object(o.b)("code",Object(s.a)({parentName:"pre"},{className:"language-ts"}),"const stream = subscription.getStream()\n\nstream.subscribe({\n  onSubscribe: sub => {\n    sub.request(Number.MAX_SAFE_INTEGER) // set backpressure\n  },\n  onNext: handleEvents,\n})\n")),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"onNext")," its event handler for process incoming events."),Object(o.b)("pre",null,Object(o.b)("code",Object(s.a)({parentName:"pre"},{className:"language-ts"}),"import { Quote } from '@dxfeed/widgets-api/records/Quote'\n\nconst handleEvents = (events: Quote[]) => {\n  /* process events */\n}\n")),Object(o.b)("h2",{id:"close-subscription-stream"},"Close subscription stream"),Object(o.b)("p",null,"All ",Object(o.b)("inlineCode",{parentName:"p"},"onSubscribe")," callbacks that are called with a subscription, you need to call the ",Object(o.b)("inlineCode",{parentName:"p"},"subs.close")," method to close the stream."),Object(o.b)("pre",null,Object(o.b)("code",Object(s.a)({parentName:"pre"},{className:"language-ts"}),"stream.subscribe({\n  onSubscribe: sub => {\n    setTimeout(() => sub.close(), 5000) // close after 5s\n  },\n  onNext: console.log,\n})\n")),Object(o.b)("h2",{id:"close-connection"},"Close connection"),Object(o.b)("p",null,"If you need to close the web socket connection"),Object(o.b)("pre",null,Object(o.b)("code",Object(s.a)({parentName:"pre"},{className:"language-ts"}),"client.close()\n")))}void 0!==l&&l&&l===Object(l)&&Object.isExtensible(l)&&!l.hasOwnProperty("__filemeta")&&Object.defineProperty(l,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"src/usage.mdx"}}),l.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-usage-mdx-179d065647a6e0100101.js.map